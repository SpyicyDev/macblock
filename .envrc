#!/usr/bin/env bash

watch_file pyproject.toml
watch_file uv.lock

if [[ ! -d .venv ]]; then
  log_status "Creating virtual environment (.venv)"
  uv venv
fi

log_status "Syncing dependencies"
uv sync --dev --quiet

export VIRTUAL_ENV="$PWD/.venv"
PATH_add "$VIRTUAL_ENV/bin"

export PYTHONPATH="$PWD/src:${PYTHONPATH:-}"

dotenv_if_exists .env
